// var _0x297b32=_0x11fb;(function(_0x4e8e1e,_0x59f923){var _0x557fdc=_0x11fb,_0x4b4699=_0x4e8e1e();while(!![]){try{var _0x2f9a5e=-parseInt(_0x557fdc(0x19d))/0x1*(-parseInt(_0x557fdc(0x1d7))/0x2)+-parseInt(_0x557fdc(0x19b))/0x3+parseInt(_0x557fdc(0x1d1))/0x4+-parseInt(_0x557fdc(0x1d0))/0x5+parseInt(_0x557fdc(0x1d5))/0x6+parseInt(_0x557fdc(0x1d3))/0x7+parseInt(_0x557fdc(0x1c8))/0x8;if(_0x2f9a5e===_0x59f923)break;else _0x4b4699['push'](_0x4b4699['shift']());}catch(_0x3c1a95){_0x4b4699['push'](_0x4b4699['shift']());}}}(_0xce88,0x2b9fc),src=_0x297b32(0x1a5));function initLeanCloud(){var _0x590aad=_0x297b32;const _0x2a40d5=_0x590aad(0x1e9),_0x337fc=_0x590aad(0x195),_0x47c469=_0x590aad(0x17c);AV[_0x590aad(0x19c)]({'appId':_0x2a40d5,'appKey':_0x337fc,'serverURL':_0x47c469});}function requestData(_0xd971e2,_0x2382d1,_0x4526a5,_0x58f14f){var _0x35dd0e=_0x297b32;const _0x2f52e8=new AV[(_0x35dd0e(0x1c1))](_0x35dd0e(0x1a9));_0x2f52e8[_0x35dd0e(0x180)](_0x35dd0e(0x1b6),_0x4526a5);const _0x49c42e=new AV[(_0x35dd0e(0x1c1))](_0x35dd0e(0x1a9));_0x49c42e[_0x35dd0e(0x180)]('content',_0x4526a5);const _0x4d739d=new AV['Query']('guwen');_0x4d739d[_0x35dd0e(0x180)](_0x35dd0e(0x1a1),_0x4526a5);const _0x52747e=AV[_0x35dd0e(0x1c1)]['or'](_0x2f52e8,_0x49c42e,_0x4d739d);_0x52747e['limit'](_0x2382d1),_0x52747e[_0x35dd0e(0x1a7)]((_0xd971e2-0x1)*_0x2382d1),_0x52747e[_0x35dd0e(0x1b0)]()[_0x35dd0e(0x182)](function(_0x588460){var _0x1f8a23=_0x35dd0e,_0x2712e7=document[_0x1f8a23(0x1a2)](_0x1f8a23(0x186));_0x588460[_0x1f8a23(0x1a0)](function(_0x1f4eb2){var _0x3db852=_0x1f8a23,_0x1b534f=_0x1f4eb2[_0x3db852(0x190)]('content'),_0x149ac7=_0x1f4eb2['get'](_0x3db852(0x1a1)),_0x197120=_0x1f4eb2[_0x3db852(0x190)](_0x3db852(0x1b6)),_0x45e533=_0x1f4eb2[_0x3db852(0x190)](_0x3db852(0x1df)),_0x1d7452=_0x1f4eb2[_0x3db852(0x190)](_0x3db852(0x199)),_0x379581=_0x1f4eb2[_0x3db852(0x190)](_0x3db852(0x1de)),_0x301369=_0x1f4eb2[_0x3db852(0x190)](_0x3db852(0x19f)),_0x426742=document[_0x3db852(0x1ba)](_0x3db852(0x188));_0x426742['classList'][_0x3db852(0x17e)]('poem-card');var _0x16b040=document[_0x3db852(0x1ba)]('h5');_0x16b040[_0x3db852(0x1b1)][_0x3db852(0x17e)]('poem-title'),_0x16b040[_0x3db852(0x1ec)]=_0x149ac7;var _0x892314=document[_0x3db852(0x1ba)](_0x3db852(0x188));_0x892314[_0x3db852(0x1b1)][_0x3db852(0x17e)](_0x3db852(0x193)),_0x892314[_0x3db852(0x1ec)]=_0x45e533+'\x20·\x20'+_0x197120;var _0x40cb2e=document[_0x3db852(0x1ba)](_0x3db852(0x188));_0x40cb2e[_0x3db852(0x1b1)]['add']('poem-content'),_0x40cb2e[_0x3db852(0x1ec)]=_0x1b534f,_0x426742[_0x3db852(0x1ad)](_0x16b040),_0x426742[_0x3db852(0x1ad)](_0x892314),_0x426742[_0x3db852(0x1ad)](_0x40cb2e),_0x2712e7['appendChild'](_0x426742),_0x426742[_0x3db852(0x1b5)](_0x3db852(0x18a),function(){var _0x466a73=_0x3db852;localStorage['setItem'](_0x466a73(0x1d9),_0x149ac7),localStorage['setItem'](_0x466a73(0x18f),_0x197120),localStorage[_0x466a73(0x192)](_0x466a73(0x1e4),_0x1b534f),localStorage[_0x466a73(0x192)]('selectedPoemRemark',_0x1d7452),localStorage[_0x466a73(0x192)](_0x466a73(0x1cd),_0x379581),localStorage[_0x466a73(0x192)]('selectedPoemShangxi',_0x301369),localStorage[_0x466a73(0x192)](_0x466a73(0x1e7),_0x45e533),window[_0x466a73(0x198)][_0x466a73(0x1b4)]='poem-details.html';});}),_0x58f14f();})[_0x35dd0e(0x1c9)](function(_0x222160){var _0x60dae1=_0x35dd0e;console[_0x60dae1(0x1dc)](_0x60dae1(0x1cc),_0x222160),_0x58f14f();});}function clean(){var _0x6da4ec=_0x297b32,_0x288d9e=document[_0x6da4ec(0x1a2)](_0x6da4ec(0x186));_0x288d9e[_0x6da4ec(0x1c2)]='';}function requestFamousSentences(_0x10606d,_0x3adf59,_0x26320,_0x5dfb75){var _0x283493=_0x297b32;const _0x1ae2cc=new AV['Query'](_0x283493(0x1c3));_0x1ae2cc[_0x283493(0x180)](_0x283493(0x1f0),_0x26320);const _0x50bfba=new AV['Query'](_0x283493(0x1c3));_0x50bfba['contains']('name',_0x26320);const _0x2449b0=AV[_0x283493(0x1c1)]['or'](_0x1ae2cc,_0x50bfba);_0x2449b0[_0x283493(0x1eb)](_0x3adf59),_0x2449b0['skip']((_0x10606d-0x1)*_0x3adf59),_0x2449b0[_0x283493(0x1b0)]()['then'](function(_0x1804a5){var _0x4b0840=_0x283493,_0x35fbdc=document[_0x4b0840(0x1a2)](_0x4b0840(0x186));_0x1804a5[_0x4b0840(0x1a0)](function(_0x52a5d6,_0x2830d6){var _0x172f56=_0x4b0840,_0x3ab450=_0x52a5d6['get'](_0x172f56(0x1f0)),_0x3d492b=_0x52a5d6[_0x172f56(0x190)](_0x172f56(0x196)),_0x66b939=document['createElement'](_0x172f56(0x188));_0x66b939[_0x172f56(0x1b1)]['add']('poem-card'),_0x66b939[_0x172f56(0x1c5)]('data-index',_0x2830d6);var _0x4deb6e=document[_0x172f56(0x1ba)]('h5');_0x4deb6e[_0x172f56(0x1b1)][_0x172f56(0x17e)](_0x172f56(0x1ae)),_0x4deb6e[_0x172f56(0x1ec)]=_0x3d492b;var _0x1631b2=document[_0x172f56(0x1ba)]('div');_0x1631b2[_0x172f56(0x1b1)]['add'](_0x172f56(0x193)),_0x1631b2['textContent']=_0x3ab450,_0x66b939['appendChild'](_0x4deb6e),_0x66b939[_0x172f56(0x1ad)](_0x1631b2),_0x35fbdc[_0x172f56(0x1ad)](_0x66b939),_0x66b939['addEventListener'](_0x172f56(0x18a),function(){var _0x157aa4=_0x172f56;let _0xaffd4c=parseInt(this['getAttribute'](_0x157aa4(0x1f4)));const _0x345d59=JSON[_0x157aa4(0x18b)](_0x1804a5);localStorage[_0x157aa4(0x192)](_0x157aa4(0x1d4),_0x345d59),localStorage[_0x157aa4(0x192)](_0x157aa4(0x194),_0xaffd4c),window[_0x157aa4(0x198)][_0x157aa4(0x1b4)]=_0x157aa4(0x1ac);});}),_0x5dfb75();})[_0x283493(0x1c9)](function(_0x44321f){_0x5dfb75();});}function random_requestFamousSentences(_0x210861,_0x2fdaa6,_0x151a48,_0x24928b){var _0x57a095=_0x297b32;const _0x58b697=new AV['Query'](_0x57a095(0x1c3));_0x58b697[_0x57a095(0x180)](_0x57a095(0x1f0),_0x151a48);const _0x5d0f76=new AV[(_0x57a095(0x1c1))](_0x57a095(0x1c3));_0x5d0f76[_0x57a095(0x180)](_0x57a095(0x196),_0x151a48);const _0x49c580=AV['Query']['or'](_0x58b697,_0x5d0f76);let _0x47acf0=Math[_0x57a095(0x1da)](Math[_0x57a095(0x17d)]()*0x3264);_0x49c580['limit'](_0x2fdaa6),_0x49c580[_0x57a095(0x1a7)](_0x47acf0),_0x49c580[_0x57a095(0x1b0)]()[_0x57a095(0x182)](function(_0x1a4006){_0x24928b(_0x1a4006);})['catch'](function(_0x2683a7){});}function requestSpringCouplet(_0x148bc3,_0x501e06,_0x43bb42,_0x230aec){var _0x2acca3=_0x297b32;const _0x1575e9=new AV['Query'](_0x2acca3(0x179));_0x1575e9[_0x2acca3(0x180)](_0x2acca3(0x1ee),_0x43bb42);const _0xa1b011=new AV[(_0x2acca3(0x1c1))](_0x2acca3(0x179));_0xa1b011[_0x2acca3(0x180)](_0x2acca3(0x176),_0x43bb42);const _0x57fd06=AV[_0x2acca3(0x1c1)]['or'](_0x1575e9,_0xa1b011);_0x57fd06['limit'](_0x501e06),_0x57fd06[_0x2acca3(0x1a7)]((_0x148bc3-0x1)*_0x501e06),_0x57fd06[_0x2acca3(0x1b0)]()[_0x2acca3(0x182)](function(_0x1ec651){var _0x4240c0=_0x2acca3,_0xa9c0af=document[_0x4240c0(0x1a2)]('poem-list');_0x1ec651[_0x4240c0(0x1a0)](function(_0x1f797f,_0x372e59){var _0x8ba662=_0x4240c0,_0x49681c=_0x1f797f[_0x8ba662(0x190)]('shang'),_0x2f35ca=_0x1f797f[_0x8ba662(0x190)]('xia'),_0x1177c8=document[_0x8ba662(0x1ba)](_0x8ba662(0x188));_0x1177c8[_0x8ba662(0x1b1)][_0x8ba662(0x17e)]('poem-card'),_0x1177c8[_0x8ba662(0x1c5)]('data-index',_0x372e59);var _0x3b572c=document['createElement']('h5');_0x3b572c[_0x8ba662(0x1b1)][_0x8ba662(0x17e)](_0x8ba662(0x1ae)),_0x3b572c['textContent']=_0x49681c;var _0x5c76c9=document[_0x8ba662(0x1ba)]('h5');_0x5c76c9[_0x8ba662(0x1b1)][_0x8ba662(0x17e)](_0x8ba662(0x1ae)),_0x5c76c9[_0x8ba662(0x1ec)]=_0x2f35ca,_0x1177c8[_0x8ba662(0x1ad)](_0x3b572c),_0x1177c8[_0x8ba662(0x1ad)](_0x5c76c9),_0xa9c0af[_0x8ba662(0x1ad)](_0x1177c8),_0x1177c8['addEventListener']('click',function(){var _0x16ff4d=_0x8ba662;const _0x1cc368=_0x49681c+_0x2f35ca;localStorage['setItem']('jiziInputContent',_0x1cc368),window[_0x16ff4d(0x198)][_0x16ff4d(0x1b4)]=_0x16ff4d(0x18c);});}),_0x230aec();})[_0x2acca3(0x1c9)](function(_0x42f4fc){});}function requestZitie_today(_0x56f3b0,_0x41f246,_0xce8d68,_0x13e46c){var _0x5724ae=_0x297b32;const _0x214a7c=new AV[(_0x5724ae(0x1c1))](_0x5724ae(0x1dd));_0x214a7c[_0x5724ae(0x180)](_0x5724ae(0x1cf),_0xce8d68);const _0x441cde=new AV[(_0x5724ae(0x1c1))]('zitie');_0x441cde[_0x5724ae(0x180)](_0x5724ae(0x196),_0xce8d68);const _0x165eba=AV[_0x5724ae(0x1c1)]['or'](_0x214a7c,_0x441cde);_0x165eba[_0x5724ae(0x1eb)](_0x41f246),_0x165eba[_0x5724ae(0x187)](_0x5724ae(0x1e3)),_0x165eba[_0x5724ae(0x1a7)]((_0x56f3b0-0x1)*_0x41f246);var _0x2dcb1c=document[_0x5724ae(0x1a2)](_0x5724ae(0x1a4));_0x165eba[_0x5724ae(0x1b0)]()[_0x5724ae(0x182)](function(_0x463a6d){var _0x1bb32b=_0x5724ae;_0x463a6d[_0x1bb32b(0x1a0)](function(_0x1b53c9){var _0x388182=_0x1bb32b,_0x35bfdb=document['createElement'](_0x388182(0x188));_0x35bfdb[_0x388182(0x1b1)][_0x388182(0x17e)](_0x388182(0x185)),_0x2dcb1c['appendChild'](_0x35bfdb);var _0x1dd346=document[_0x388182(0x1ba)](_0x388182(0x188));_0x1dd346[_0x388182(0x1b1)]['add']('text'),_0x35bfdb[_0x388182(0x1ad)](_0x1dd346);var _0x24d7bd=_0x1b53c9[_0x388182(0x190)](_0x388182(0x1aa)),_0x18ccd5=_0x1b53c9['get']('author'),_0x34a9b6=document[_0x388182(0x1ba)](_0x388182(0x188));_0x34a9b6['classList'][_0x388182(0x17e)]('name'),_0x34a9b6['textContent']=_0x18ccd5+'·'+_0x24d7bd,_0x1dd346['appendChild'](_0x34a9b6);var _0xd39814=document[_0x388182(0x1ba)](_0x388182(0x1f2)),_0x242b46=_0x1b53c9['get']('cover'),_0x4a6c59=decodeURIComponent(_0x242b46);_0xd39814[_0x388182(0x1ca)]=_0x4a6c59,_0x35bfdb['appendChild'](_0xd39814),_0xd39814[_0x388182(0x1b5)]('click',function(){var _0x3962a4=_0x388182,_0x136db3=_0x1b53c9[_0x3962a4(0x190)](_0x3962a4(0x1be)),_0x28b659=_0x1b53c9['get'](_0x3962a4(0x1cb)),_0x4b8628=_0x1b53c9[_0x3962a4(0x190)](_0x3962a4(0x1f1)),_0x1160b2=_0x1b53c9[_0x3962a4(0x190)](_0x3962a4(0x1af)),_0x501719=_0x1b53c9[_0x3962a4(0x190)](_0x3962a4(0x18e)),_0x50777d=_0x1b53c9['get']('author'),_0x338019=_0x1b53c9['get'](_0x3962a4(0x1aa));localStorage[_0x3962a4(0x192)](_0x3962a4(0x1be),JSON[_0x3962a4(0x18b)](_0x136db3)),localStorage[_0x3962a4(0x192)](_0x3962a4(0x1cb),_0x28b659),localStorage[_0x3962a4(0x192)]('imgType',_0x1160b2),localStorage[_0x3962a4(0x192)](_0x3962a4(0x1f1),_0x4b8628),localStorage[_0x3962a4(0x192)](_0x3962a4(0x18e),_0x501719),localStorage[_0x3962a4(0x192)](_0x3962a4(0x196),_0x338019),localStorage['setItem'](_0x3962a4(0x1cf),_0x50777d),window[_0x3962a4(0x198)]['href']=_0x3962a4(0x1e2);});}),_0x13e46c(_0x463a6d);})['catch'](function(_0x1261e3){});}function requestZitie_today_imgs(_0xe45d8c,_0x2578d1,_0x18c301,_0x23fc9f){var _0x4c8b2c=_0x297b32;const _0x21ad45=new AV[(_0x4c8b2c(0x1c1))](_0x4c8b2c(0x1e1));_0x21ad45[_0x4c8b2c(0x184)](_0x4c8b2c(0x1b2),_0x18c301),_0x21ad45[_0x4c8b2c(0x1eb)](_0x2578d1),_0x21ad45[_0x4c8b2c(0x1a7)]((_0xe45d8c-0x1)*_0x2578d1),_0x21ad45[_0x4c8b2c(0x1b0)]()['then'](function(_0xa7e9f3){var _0x193d00=_0x4c8b2c,_0x20d48a=document[_0x193d00(0x1a2)](_0x193d00(0x1a4));_0xa7e9f3['forEach'](function(_0x5383fb){var _0x88a8b5=_0x193d00,_0x4989d0=document[_0x88a8b5(0x1ba)](_0x88a8b5(0x1f2));_0x4989d0[_0x88a8b5(0x1b1)][_0x88a8b5(0x17e)]('img-fluid');var _0x24dca3=_0x5383fb[_0x88a8b5(0x190)]('img'),_0x436fea=decodeURIComponent(_0x24dca3);_0x4989d0[_0x88a8b5(0x1ca)]=_0x436fea,_0x20d48a['appendChild'](_0x4989d0);}),_0x23fc9f(_0xa7e9f3);})[_0x4c8b2c(0x1c9)](function(_0x3d8a7d){});}function requestZitie(_0x31a1f4,_0x7f26f,_0x198086,_0x413d12){var _0x4642ff=_0x297b32;const _0x2537a4=new AV[(_0x4642ff(0x1c1))](_0x4642ff(0x177));_0x2537a4['contains'](_0x4642ff(0x1cf),_0x198086);const _0x573ecb=new AV[(_0x4642ff(0x1c1))]('zitie_pdf2');_0x573ecb[_0x4642ff(0x180)](_0x4642ff(0x196),_0x198086);const _0x2de531=AV['Query']['or'](_0x2537a4,_0x573ecb);_0x2de531['limit'](_0x7f26f),_0x2de531[_0x4642ff(0x187)](_0x4642ff(0x1e3)),_0x2de531[_0x4642ff(0x1a7)]((_0x31a1f4-0x1)*_0x7f26f),_0x2de531[_0x4642ff(0x1b0)]()[_0x4642ff(0x182)](function(_0x4cb1e9){var _0x708d0=_0x4642ff,_0x262b94=document[_0x708d0(0x1a2)](_0x708d0(0x186));_0x4cb1e9[_0x708d0(0x1a0)](function(_0x2270a9){var _0x4403b4=_0x708d0,_0x15e52e=_0x2270a9['get'](_0x4403b4(0x1ed)),_0x58d594=_0x2270a9['get'](_0x4403b4(0x1cf)),_0x2dc8f4=_0x2270a9[_0x4403b4(0x190)](_0x4403b4(0x196)),_0x15e52e=_0x2270a9[_0x4403b4(0x190)](_0x4403b4(0x1ed)),_0x1d081f=document[_0x4403b4(0x1ba)](_0x4403b4(0x188));_0x1d081f[_0x4403b4(0x1b1)][_0x4403b4(0x17e)](_0x4403b4(0x1b8));var _0x5959bb=document[_0x4403b4(0x1ba)]('div');_0x5959bb[_0x4403b4(0x1b1)][_0x4403b4(0x17e)](_0x4403b4(0x1ea));var _0x5e1e3e=document[_0x4403b4(0x1ba)](_0x4403b4(0x188));_0x5e1e3e[_0x4403b4(0x1b1)]['add']('image-wrapper');var _0x214172=_0x2270a9[_0x4403b4(0x190)]('cover'),_0x41dc21=decodeURIComponent(_0x214172),_0xc5e2c7=document[_0x4403b4(0x1ba)](_0x4403b4(0x1f2));_0xc5e2c7[_0x4403b4(0x1ca)]=_0x41dc21,_0xc5e2c7[_0x4403b4(0x1b1)][_0x4403b4(0x17e)]('poem-cover');var _0x2c0b1e=document[_0x4403b4(0x1ba)]('div');_0x2c0b1e['classList'][_0x4403b4(0x17e)](_0x4403b4(0x1ef)),_0x2c0b1e['textContent']=_0x2dc8f4;var _0x336c12=document['createElement'](_0x4403b4(0x188));_0x336c12[_0x4403b4(0x1b1)][_0x4403b4(0x17e)](_0x4403b4(0x193)),_0x336c12[_0x4403b4(0x1ec)]=_0x58d594,_0x1d081f[_0x4403b4(0x1ad)](_0x2c0b1e),_0x1d081f[_0x4403b4(0x1ad)](_0x336c12),_0x5959bb[_0x4403b4(0x1ad)](_0x5e1e3e),_0x5e1e3e[_0x4403b4(0x1ad)](_0xc5e2c7),_0x5959bb['appendChild'](_0x1d081f),_0x262b94[_0x4403b4(0x1ad)](_0x5959bb),_0x1d081f[_0x4403b4(0x1b5)]('click',function(){var _0x237b76=_0x4403b4;localStorage[_0x237b76(0x192)](_0x237b76(0x1ce),_0x214172),localStorage[_0x237b76(0x192)](_0x237b76(0x1bb),_0x58d594),localStorage[_0x237b76(0x192)](_0x237b76(0x175),_0x2dc8f4),localStorage[_0x237b76(0x192)](_0x237b76(0x17b),_0x15e52e),window[_0x237b76(0x198)][_0x237b76(0x1b4)]=_0x237b76(0x1a6);});}),_0x413d12(_0x4cb1e9);})[_0x4642ff(0x1c9)](function(_0x2484f1){});}const timeSince=_0x2f6237=>{var _0x27ec29=_0x297b32;const _0x47279d=Math[_0x27ec29(0x1da)]((new Date()-_0x2f6237)/0x3e8);let _0xad7a1b=_0x47279d/0x1e13380;if(_0xad7a1b>0x1)return Math[_0x27ec29(0x1da)](_0xad7a1b)+_0x27ec29(0x17a);_0xad7a1b=_0x47279d/0x278d00;if(_0xad7a1b>0x1)return Math[_0x27ec29(0x1da)](_0xad7a1b)+'\x20个月前';_0xad7a1b=_0x47279d/0x15180;if(_0xad7a1b>0x1)return Math[_0x27ec29(0x1da)](_0xad7a1b)+_0x27ec29(0x189);_0xad7a1b=_0x47279d/0xe10;if(_0xad7a1b>0x1)return Math[_0x27ec29(0x1da)](_0xad7a1b)+_0x27ec29(0x1c4);_0xad7a1b=_0x47279d/0x3c;if(_0xad7a1b>0x1)return Math[_0x27ec29(0x1da)](_0xad7a1b)+_0x27ec29(0x1c0);if(_0x47279d<0xa)return'刚刚';return Math[_0x27ec29(0x1da)](_0x47279d)+'\x20秒前';};function requestDiscovery(_0x4c2099,_0x489ede,_0x14f8e4){var _0x5cc2bb=_0x297b32;const _0x5d704b=new AV[(_0x5cc2bb(0x1c1))](_0x5cc2bb(0x181));_0x5d704b[_0x5cc2bb(0x1eb)](_0x489ede),_0x5d704b[_0x5cc2bb(0x1a7)]((_0x4c2099-0x1)*_0x489ede),_0x5d704b['find']()['then'](function(_0x59f4a6){var _0x1fb5f7=_0x5cc2bb,_0x43b6bb=document['getElementById'](_0x1fb5f7(0x1a4));_0x59f4a6[_0x1fb5f7(0x1a0)](function(_0x32be5b){var _0x571451=_0x1fb5f7,_0x9bca6d=document['createElement'](_0x571451(0x188));_0x9bca6d[_0x571451(0x1b1)][_0x571451(0x17e)](_0x571451(0x185)),_0x43b6bb[_0x571451(0x1ad)](_0x9bca6d);var _0x1d53c1=document[_0x571451(0x1ba)](_0x571451(0x188));_0x1d53c1[_0x571451(0x1b1)]['add'](_0x571451(0x1e5)),_0x9bca6d[_0x571451(0x1ad)](_0x1d53c1);var _0xcba4da=_0x32be5b[_0x571451(0x190)](_0x571451(0x1aa)),_0x327c02=_0x32be5b[_0x571451(0x190)](_0x571451(0x1cf)),_0x2d09d5=document[_0x571451(0x1ba)](_0x571451(0x188));_0x2d09d5[_0x571451(0x1b1)][_0x571451(0x17e)](_0x571451(0x196)),_0x2d09d5[_0x571451(0x1ec)]=_0x327c02+'·'+_0xcba4da,_0x1d53c1[_0x571451(0x1ad)](_0x2d09d5);var _0x1f47a1=document[_0x571451(0x1ba)](_0x571451(0x1f2)),_0x2425dc=_0x32be5b[_0x571451(0x190)](_0x571451(0x1e0)),_0x5d94b2=decodeURIComponent(_0x2425dc);_0x1f47a1[_0x571451(0x1ca)]=_0x5d94b2,_0x9bca6d[_0x571451(0x1ad)](_0x1f47a1),_0x1f47a1['addEventListener'](_0x571451(0x18a),function(){var _0x26b1a6=_0x571451,_0x2b7f27=_0x32be5b[_0x26b1a6(0x190)](_0x26b1a6(0x1be)),_0x11162c=_0x32be5b['get'](_0x26b1a6(0x1cb)),_0x57baea=_0x32be5b[_0x26b1a6(0x190)]('isLoop'),_0x3d4b3f=_0x32be5b[_0x26b1a6(0x190)](_0x26b1a6(0x1af)),_0x5a2b20=_0x32be5b[_0x26b1a6(0x190)]('loopNum'),_0x24e17a=_0x32be5b[_0x26b1a6(0x190)](_0x26b1a6(0x1cf)),_0x42589e=_0x32be5b['get'](_0x26b1a6(0x1aa));localStorage[_0x26b1a6(0x192)](_0x26b1a6(0x1be),JSON[_0x26b1a6(0x18b)](_0x2b7f27)),localStorage[_0x26b1a6(0x192)]('objectId',_0x11162c),localStorage[_0x26b1a6(0x192)](_0x26b1a6(0x1af),_0x3d4b3f),localStorage[_0x26b1a6(0x192)](_0x26b1a6(0x1f1),_0x57baea),localStorage['setItem'](_0x26b1a6(0x18e),_0x5a2b20),localStorage[_0x26b1a6(0x192)](_0x26b1a6(0x196),_0x42589e),localStorage[_0x26b1a6(0x192)](_0x26b1a6(0x1cf),_0x24e17a),window['location'][_0x26b1a6(0x1b4)]=_0x26b1a6(0x1e2);});}),_0x14f8e4(_0x59f4a6);})[_0x5cc2bb(0x1c9)](function(_0x3f32a4){});}function _0x11fb(_0x3c42bb,_0x1c335a){var _0xce8832=_0xce88();return _0x11fb=function(_0x11fb62,_0x43c02a){_0x11fb62=_0x11fb62-0x175;var _0x4adb17=_0xce8832[_0x11fb62];return _0x4adb17;},_0x11fb(_0x3c42bb,_0x1c335a);}function _0xce88(){var _0x31d188=['012345','selectedPoemDynasty','dict_name','ynMAn7XOvvxivG61hKnibx0P-gzGzoHsz','poem-container','limit','textContent','describe','shang','poem-content','from','isLoop','img','.jpg','data-index','selectedZitieName','xia','zitie_pdf2','dict_className','SpringCouplets','\x20年前','selectedZitieDescribe','https://api.lintiebao.cn','random','add','class_name','contains','post','then','backgroundColor','equalTo','card','poem-list','descending','div','\x20天前','click','stringify','jizi2_next.html','getItem','loopNum','selectedPoemAuthor','get','shufaDict.html','setItem','poem-author','famousSentencesIndex','bJozAX2UEPCNqmriHhTiceIc','name','privateKey','location','remark','dictMore_name','672330YDJBxe','init','59547ttjgRJ','grid-item','shangxi','forEach','title','getElementById','dict_title','container','https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js','zitie_detail.html','skip','https://image.lintiebao.cn/shufa/dic/','guwen','zitieName','danzi','famousSentencesDetail.html','appendChild','poem-title','imgType','find','classList','zitieId','fill','href','addEventListener','writer','grid-container','poem-card','log','createElement','selectedZitieAuthor','dict_img','setPrivateKey','imgArr','innerText','\x20分钟前','Query','innerHTML','sentence','\x20小时前','setAttribute','style','danzi_cate','1213832xUKsJe','catch','src','objectId','Error\x20while\x20fetching\x20data:','selectedPoemTranslation','selectedZitieCover','author','1296700SiKBZt','499868MsIkbD','书法字典','1077097rgCtra','famousSentencesArray','317556tNvKYz','decrypt','6zAvetR','length','selectedPoemTitle','floor','dict_id','error','zitie','translation','dynasty','cover','zitieImg','zitie_today_detail.html','createdAt','selectedPoemContent','text'];_0xce88=function(){return _0x31d188;};return _0xce88();}function requestZidianDictCate(_0x5b0ffd,_0x4b3194,_0x132809,_0x2e4a48){var _0x238151=_0x297b32;const _0x13622e=new AV[(_0x238151(0x1c1))]('danzi_cate');_0x13622e[_0x238151(0x180)](_0x238151(0x1cf),_0x132809);const _0x269b65=new AV[(_0x238151(0x1c1))](_0x238151(0x1c7));_0x269b65[_0x238151(0x180)]('name',_0x132809);const _0x389830=AV['Query']['or'](_0x13622e,_0x269b65);_0x389830[_0x238151(0x1eb)](_0x4b3194),_0x389830[_0x238151(0x187)](_0x238151(0x1e3)),_0x389830[_0x238151(0x1a7)]((_0x5b0ffd-0x1)*_0x4b3194),_0x389830[_0x238151(0x1b0)]()['then'](function(_0x5ec519){var _0x528279=_0x238151,_0x367c98=document[_0x528279(0x1a2)](_0x528279(0x1b7));_0x5ec519[_0x528279(0x1a0)](function(_0x139a7e){var _0x2eb630=_0x528279,_0x33d3a1=document[_0x2eb630(0x1ba)]('div');_0x33d3a1[_0x2eb630(0x1b1)]['add'](_0x2eb630(0x19e));var _0x82484e=_0x139a7e['get'](_0x2eb630(0x196));_0x33d3a1[_0x2eb630(0x1ec)]=_0x82484e,_0x367c98[_0x2eb630(0x1ad)](_0x33d3a1),_0x33d3a1[_0x2eb630(0x1c6)][_0x2eb630(0x183)]=getRandomDarkColor(),_0x33d3a1[_0x2eb630(0x1b5)](_0x2eb630(0x18a),function(){var _0x14b1ae=_0x2eb630;localStorage[_0x14b1ae(0x192)](_0x14b1ae(0x178),_0x139a7e['get'](_0x14b1ae(0x17f))),localStorage[_0x14b1ae(0x192)](_0x14b1ae(0x19a),_0x82484e),_0x82484e==_0x14b1ae(0x1d2)?window[_0x14b1ae(0x198)][_0x14b1ae(0x1b4)]='https://mdx.lintiebao.cn':window[_0x14b1ae(0x198)][_0x14b1ae(0x1b4)]=_0x14b1ae(0x191);});}),_0x2e4a48(_0x5ec519);})[_0x238151(0x1c9)](function(_0xfc3a28){});}function getRandomDarkColor(){var _0x5bbcb2=_0x297b32,_0x37f45e=_0x5bbcb2(0x1e6),_0x3c1711='#';for(var _0x53248a=0x0;_0x53248a<0x3;_0x53248a++){_0x3c1711+=_0x37f45e[Math['floor'](Math['random']()*0x6)];}return _0x3c1711;}function requestZidianDict(_0x2444c1,_0x1e4ee1,_0x4d522b,_0x478d1b){var _0x599eaa=_0x297b32,_0xf8e219=localStorage[_0x599eaa(0x18d)](_0x599eaa(0x178))??_0x599eaa(0x1ab);const _0xa1eb06=new AV[(_0x599eaa(0x1c1))](_0xf8e219);_0xa1eb06[_0x599eaa(0x180)](_0x599eaa(0x196),_0x4d522b),_0xa1eb06[_0x599eaa(0x1eb)](_0x1e4ee1),_0xa1eb06['skip']((_0x2444c1-0x1)*_0x1e4ee1),_0xa1eb06[_0x599eaa(0x1b0)]()[_0x599eaa(0x182)](function(_0x1c25f3){var _0x326037=_0x599eaa,_0x18133b=document[_0x326037(0x1a2)](_0x326037(0x1a4));_0x1c25f3[_0x326037(0x1a0)](function(_0x18b424){var _0x18a25=_0x326037,_0x3d7e0a=document[_0x18a25(0x1ba)](_0x18a25(0x188));_0x3d7e0a[_0x18a25(0x1b1)][_0x18a25(0x17e)](_0x18a25(0x185)),_0x18133b[_0x18a25(0x1ad)](_0x3d7e0a);var _0x4c19b7=document['createElement'](_0x18a25(0x188));_0x4c19b7[_0x18a25(0x1b1)][_0x18a25(0x17e)](_0x18a25(0x1e5)),_0x3d7e0a[_0x18a25(0x1ad)](_0x4c19b7);var _0x36ed95=_0x18b424['get']('name'),_0x1266fd=document[_0x18a25(0x1ba)](_0x18a25(0x188));_0x1266fd['classList'][_0x18a25(0x17e)]('name'),_0x1266fd[_0x18a25(0x1ec)]=_0x36ed95,_0x4c19b7[_0x18a25(0x1ad)](_0x1266fd);var _0x37ff41=document['createElement'](_0x18a25(0x1f2)),_0x5791f7=_0x18b424['get'](_0x18a25(0x1f2));if(_0x5791f7==undefined){var _0x2efc85=decodeURIComponent(_0x18a25(0x1a8)+_0x18b424['get'](_0x18a25(0x1a1))+_0x18a25(0x1f3));_0x37ff41[_0x18a25(0x1ca)]=_0x2efc85;}else{const _0x5c8e46=new JSEncrypt();_0x5c8e46[_0x18a25(0x1bd)](key);const _0x3b1a71=_0x5c8e46[_0x18a25(0x1d6)](_0x5791f7);var _0x2efc85=decodeURIComponent(_0x3b1a71);_0x37ff41[_0x18a25(0x1ca)]=_0x2efc85;}_0x3d7e0a[_0x18a25(0x1ad)](_0x37ff41),_0x37ff41['addEventListener'](_0x18a25(0x18a),function(){var _0x5edd5e=_0x18a25;localStorage[_0x5edd5e(0x192)](_0x5edd5e(0x1bc),_0x37ff41[_0x5edd5e(0x1ca)]),localStorage[_0x5edd5e(0x192)]('dict_name',_0x36ed95),localStorage[_0x5edd5e(0x192)]('dict_title',_0x18b424['get'](_0x5edd5e(0x1a1))),localStorage[_0x5edd5e(0x192)]('dict_id',_0x18b424[_0x5edd5e(0x190)](_0x5edd5e(0x1cb))),window[_0x5edd5e(0x198)][_0x5edd5e(0x1b4)]='shufaDictDetail.html';});}),_0x478d1b(_0x1c25f3);})['catch'](function(_0x9b9966){});}function requestZidianDict(_0x20f107,_0x5ba2f3,_0x3b7216,_0xdd8d06){var _0x21451b=_0x297b32,_0x4c2b13=localStorage['getItem']('dict_className')??'danzi';const _0x58064c=new AV[(_0x21451b(0x1c1))](_0x4c2b13);_0x58064c[_0x21451b(0x180)](_0x21451b(0x196),_0x3b7216),_0x58064c[_0x21451b(0x1eb)](_0x5ba2f3),_0x58064c[_0x21451b(0x1a7)]((_0x20f107-0x1)*_0x5ba2f3),_0x58064c[_0x21451b(0x1b0)]()[_0x21451b(0x182)](function(_0x100783){var _0x573882=_0x21451b,_0x267357=document['getElementById'](_0x573882(0x1a4));_0x100783[_0x573882(0x1a0)](function(_0x29d59e){var _0x14e081=_0x573882,_0x4cab8d=document[_0x14e081(0x1ba)](_0x14e081(0x188));_0x4cab8d[_0x14e081(0x1b1)][_0x14e081(0x17e)]('card'),_0x267357[_0x14e081(0x1ad)](_0x4cab8d);var _0xbb350f=document[_0x14e081(0x1ba)](_0x14e081(0x188));_0xbb350f[_0x14e081(0x1b1)]['add'](_0x14e081(0x1e5)),_0x4cab8d[_0x14e081(0x1ad)](_0xbb350f);var _0x390a03=_0x29d59e[_0x14e081(0x190)](_0x14e081(0x196)),_0x2cfae6=document[_0x14e081(0x1ba)](_0x14e081(0x188));_0x2cfae6[_0x14e081(0x1b1)][_0x14e081(0x17e)](_0x14e081(0x196)),_0x2cfae6[_0x14e081(0x1ec)]=_0x390a03,_0xbb350f[_0x14e081(0x1ad)](_0x2cfae6);var _0x5a46a7=document[_0x14e081(0x1ba)]('img'),_0x22055a=_0x29d59e[_0x14e081(0x190)](_0x14e081(0x1f2));if(_0x22055a==undefined){var _0x354a95=decodeURIComponent(_0x14e081(0x1a8)+_0x29d59e['get']('title')+_0x14e081(0x1f3));_0x5a46a7[_0x14e081(0x1ca)]=_0x354a95;}else{const _0xa3dd21=new JSEncrypt();_0xa3dd21[_0x14e081(0x1bd)](key);const _0xd0778a=_0xa3dd21['decrypt'](_0x22055a);var _0x354a95=decodeURIComponent(_0xd0778a);_0x5a46a7['src']=_0x354a95;}_0x4cab8d['appendChild'](_0x5a46a7),_0x5a46a7[_0x14e081(0x1b5)](_0x14e081(0x18a),function(){var _0x314011=_0x14e081;localStorage[_0x314011(0x192)](_0x314011(0x1bc),_0x5a46a7[_0x314011(0x1ca)]),localStorage[_0x314011(0x192)](_0x314011(0x1e8),_0x390a03),localStorage[_0x314011(0x192)](_0x314011(0x1a3),_0x29d59e[_0x314011(0x190)](_0x314011(0x1a1))),localStorage[_0x314011(0x192)](_0x314011(0x1db),_0x29d59e[_0x314011(0x190)](_0x314011(0x1cb))),window[_0x314011(0x198)][_0x314011(0x1b4)]='shufaDictDetail.html';});}),_0xdd8d06(_0x100783);})['catch'](function(_0x5df6d9){});}function requestZidianDict2(_0x176375,_0x28e081,_0x2bacbe,_0x2b8748){var _0x9f9c19=_0x297b32;let _0x440ec1=new Array(_0x2bacbe[_0x9f9c19(0x1d8)])[_0x9f9c19(0x1b3)](null),_0xc87af8=localStorage['getItem'](_0x9f9c19(0x178))??'danzi';const _0x570107=0x1;let _0x339045=0x0,_0x548a0b=0x0;function _0x46cd41(_0x8918d9){var _0x32a418=_0x9f9c19;if(_0x8918d9>=_0x2bacbe['length']){_0x206f44();return;}const _0x5b8da4=_0x2bacbe[_0x8918d9],_0x57f4d2=new AV[(_0x32a418(0x1c1))](_0xc87af8);_0x57f4d2[_0x32a418(0x180)](_0x32a418(0x196),_0x5b8da4),_0x57f4d2['limit'](_0x28e081),_0x57f4d2[_0x32a418(0x1a7)]((_0x176375-0x1)*_0x28e081),_0x339045<_0x570107&&(_0x339045++,_0x57f4d2[_0x32a418(0x1b0)]()['then'](function(_0x1b78f1){var _0x2ca72e=_0x32a418;_0x339045--,_0x548a0b++;if(_0x1b78f1[_0x2ca72e(0x1d8)]>0x0){const _0x512e44=Math[_0x2ca72e(0x1da)](Math[_0x2ca72e(0x17d)]()*_0x1b78f1[_0x2ca72e(0x1d8)]),_0xa65e83=_0x1b78f1[_0x512e44],_0x34bdf2=_0xa65e83['get'](_0x2ca72e(0x196));_0x34bdf2===_0x5b8da4&&(_0x440ec1[_0x8918d9]=_0xa65e83);}_0x206f44(),_0x46cd41(_0x8918d9+0x1);})['catch'](function(_0x348bbc){var _0x581911=_0x32a418;console[_0x581911(0x1b9)](_0x348bbc),_0x339045--,_0x548a0b++,_0x206f44(),_0x46cd41(_0x8918d9+0x1);}));}function _0x206f44(){_0x548a0b===_0x2bacbe['length']&&_0x2b8748(_0x440ec1);}_0x46cd41(0x0);}function requestZidianDict3(_0x6c8586,_0x45b40b,_0x1aea78,_0x1c8834){var _0x30d620=_0x297b32,_0xf76ec7=localStorage[_0x30d620(0x18d)]('dict_className')??_0x30d620(0x1ab);const _0x1ee950=new AV['Query'](_0xf76ec7);_0x1ee950[_0x30d620(0x180)]('name',_0x1aea78),_0x1ee950[_0x30d620(0x1eb)](_0x45b40b),_0x1ee950[_0x30d620(0x1a7)]((_0x6c8586-0x1)*_0x45b40b),_0x1ee950[_0x30d620(0x1b0)]()[_0x30d620(0x182)](function(_0x41af3b){var _0x1c520b=_0x30d620;_0x41af3b[_0x1c520b(0x1a0)](function(_0x4cb981){}),_0x1c8834(_0x41af3b);})[_0x30d620(0x1c9)](function(_0x435b59){});}function requestKey(_0x53a688){var _0x27405f=_0x297b32;const _0x1b6c50=new AV['Query'](_0x27405f(0x197));_0x1b6c50[_0x27405f(0x1b0)]()[_0x27405f(0x182)](function(_0x44e04b){_0x53a688(_0x44e04b);})[_0x27405f(0x1c9)](function(_0x28e71a){});}function cleanDict(){var _0x40b759=_0x297b32,_0x421635=document[_0x40b759(0x1a2)](_0x40b759(0x1a4));_0x421635[_0x40b759(0x1bf)]='';}



src = "https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"
function initLeanCloud() {
    const appId = "ynMAn7XOvvxivG61hKnibx0P-gzGzoHsz";
    const appKey = "bJozAX2UEPCNqmriHhTiceIc";
    const serverURL = "https://api.lintiebao.cn";
    AV.init({ appId, appKey, serverURL });
}

function requestData(currentPage, pageSize, keyword, callback) {
    const first = new AV.Query("guwen");
    first.contains("writer", keyword);
    const second = new AV.Query("guwen");
    second.contains("content", keyword);
    const third = new AV.Query("guwen");
    third.contains("title", keyword);
    const query = AV.Query.or(first, second, third);
    query.limit(pageSize);
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {
        // 处理查询结果
        var poemList = document.getElementById('poem-list');

        results.forEach(function (object) {
            // 将数据展示在 HTML 页面上
            var contentData = object.get('content');
            var titleData = object.get('title');
            var writerData = object.get('writer');
            var dynastyData = object.get('dynasty');
            var remarkData = object.get('remark');
            var translationData = object.get('translation');
            var shangxiData = object.get('shangxi');


            var card = document.createElement('div');
            card.classList.add('poem-card');

            var title = document.createElement('h5');
            title.classList.add('poem-title');
            title.textContent = titleData;

            var author = document.createElement('div');
            author.classList.add('poem-author');
            author.textContent = dynastyData + ' · ' + writerData;

            var content = document.createElement('div');
            content.classList.add('poem-content');
            content.textContent = contentData;

            card.appendChild(title);
            card.appendChild(author);
            card.appendChild(content);
            poemList.appendChild(card);

            // 为诗词卡片添加点击事件
            card.addEventListener('click', function () {
                // 在这里处理点击事件，例如跳转到诗词的详情页
                // window.location.href = 'poem-details.html?title=' + encodeURIComponent(titleData);

                localStorage.setItem('selectedPoemTitle', titleData);
                localStorage.setItem('selectedPoemAuthor', writerData);
                localStorage.setItem('selectedPoemContent', contentData);
                localStorage.setItem('selectedPoemRemark', remarkData);
                localStorage.setItem('selectedPoemTranslation', translationData);
                localStorage.setItem('selectedPoemShangxi', shangxiData);
                localStorage.setItem('selectedPoemDynasty', dynastyData);
                // 跳转到详情页
                window.location.href = 'poem-details.html';
            });

        });
        callback();
    }).catch(function (error) {
        // 处理错误
        console.error('Error while fetching data:', error);
        callback();
    });
}
function clean() {
    var dataContainer = document.getElementById('poem-list');
    // 清空容器
    dataContainer.innerHTML = '';
}

function requestFamousSentences(currentPage, pageSize, keyword, callback) {
    const first = new AV.Query("sentence");
    first.contains("from", keyword);
    const second = new AV.Query("sentence");
    second.contains("name", keyword);
    const query = AV.Query.or(first, second);
    query.limit(pageSize);
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {
        // 处理查询结果
        var poemList = document.getElementById('poem-list');

        results.forEach(function (object,index) {
            // 将数据展示在 HTML 页面上
            var fromData = object.get('from');
            var nameData = object.get('name');
            var card = document.createElement('div');
            card.classList.add('poem-card');
            card.setAttribute('data-index', index);

            var title = document.createElement('h5');
            title.classList.add('poem-title');
            title.textContent = nameData;

            var author = document.createElement('div');
            author.classList.add('poem-author');
            author.textContent = fromData;

            card.appendChild(title);
            card.appendChild(author);
            poemList.appendChild(card);
            // 为诗词卡片添加点击事件
            card.addEventListener('click', function () {
                let clickedIndex = parseInt(this.getAttribute('data-index'));
                const serializedResults = JSON.stringify(results);
                localStorage.setItem('famousSentencesArray', serializedResults);
                localStorage.setItem('famousSentencesIndex', clickedIndex);
                window.location.href = 'famousSentencesDetail.html';
            });
        });
        callback();
    }).catch(function (error) {
        // 处理错误
        // console.error('Error while fetching data:', error);
        callback();
    });
}

function random_requestFamousSentences(currentPage, pageSize, keyword, callback) {
    const first = new AV.Query("sentence");
    first.contains("from", keyword);
    const second = new AV.Query("sentence");
    second.contains("name", keyword);
    const query = AV.Query.or(first, second);
    let randomNum = Math.floor(Math.random() * 12900);
    query.limit(pageSize);
    query.skip(randomNum);
    // 查询数据
    query.find().then(function (results) {
        // 处理查询结果
        callback(results);
    }).catch(function (error) {
        // 处理错误
        // console.error('Error while fetching data:', error);
        // callback();
    });
}

function requestSpringCouplet(currentPage, pageSize, keyword, callback) {

    const first = new AV.Query("SpringCouplets");
    first.contains("shang", keyword);
    const second = new AV.Query("SpringCouplets");
    second.contains("xia", keyword);
    const query = AV.Query.or(first, second);
    query.limit(pageSize);
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {
        // 处理查询结果
        var poemList = document.getElementById('poem-list');
        results.forEach(function (object,index) {

            // 将数据展示在 HTML 页面上
            var shangData = object.get('shang');
            var xiaData = object.get('xia');
            var card = document.createElement('div');
            card.classList.add('poem-card');
            card.setAttribute('data-index', index);

            var shang = document.createElement('h5');
            shang.classList.add('poem-title');
            shang.textContent = shangData;

            var xia = document.createElement('h5');
            xia.classList.add('poem-title');
            xia.textContent = xiaData;

            card.appendChild(shang);
            card.appendChild(xia);
            poemList.appendChild(card);
            // 为诗词卡片添加点击事件
            card.addEventListener('click', function () {
                // const inputText = document.getElementById("text-animate");
                const text = shangData + xiaData;
                localStorage.setItem('jiziInputContent', text);
                window.location.href = 'jizi2_next.html';
            });
        });
        callback();
    }).catch(function (error) {
        // 处理错误
        // console.error('Error while fetching data:', error);
        // callback();
    });
}
function requestZitie_today(currentPage, pageSize, keyword, callback) {
    const first = new AV.Query("zitie");
    first.contains("author", keyword);
    const second = new AV.Query("zitie");
    second.contains("name", keyword);
    const query = AV.Query.or(first, second);
    query.limit(pageSize);
    query.descending("createdAt");
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    var container = document.getElementById("container");
    query.find().then(function (results) {
        results.forEach(function (object) {
            var newDiv = document.createElement("div");
            newDiv.classList.add("card");
            container.appendChild(newDiv);
            var textDiv = document.createElement("div");
            textDiv.classList.add("text");
            newDiv.appendChild(textDiv);
            var nameData = object.get('zitieName');
            var authorData = object.get('author');
            var name = document.createElement("div");
            name.classList.add("name");
            name.textContent = authorData + "·" + nameData;
            textDiv.appendChild(name);
            var newImg = document.createElement("img");
            var imgurl = object.get('cover')
            var decodedUrl = decodeURIComponent(imgurl);
            newImg.src = decodedUrl;
            newDiv.appendChild(newImg);
            newImg.addEventListener('click', function () {
                var imgArr = object.get('imgArr');
                var objectId = object.get('objectId');
                var isLoop = object.get('isLoop');
                var imgType = object.get('imgType');
                var loopNum = object.get('loopNum');
                var author = object.get('author');
                var name = object.get('zitieName');
                localStorage.setItem('imgArr', JSON.stringify(imgArr));
                localStorage.setItem('objectId', objectId);
                localStorage.setItem('imgType', imgType);
                localStorage.setItem('isLoop', isLoop);
                localStorage.setItem('loopNum', loopNum);
                localStorage.setItem('name', name);
                localStorage.setItem('author', author);
                // 跳转到详情页
                window.location.href = 'zitie_today_detail.html';
            });
        })
        callback(results);
    }).catch(function (error) {
        // 处理错误
        // console.error('Error while fetching data:', error);
        // callback();
    });
}
function requestZitie_today_imgs(currentPage, pageSize, zitieId, callback) {
    const query = new AV.Query("zitieImg");
    query.equalTo("zitieId", zitieId);
    query.limit(pageSize);
    // query.descending("createdAt");
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {

        var container = document.getElementById("container");
        results.forEach(function (object) {
            var newImg = document.createElement("img");
            newImg.classList.add("img-fluid");
            var imgurl = object.get('img')
            var decodedUrl = decodeURIComponent(imgurl);
            newImg.src = decodedUrl;
            container.appendChild(newImg);
        });
        callback(results);
    }).catch(function (error) {
        // 处理错误
        // console.error('Error while fetching data:', error);
        // callback();
    });
}
function requestZitie(currentPage, pageSize, keyword, callback) {
    const first = new AV.Query("zitie_pdf");
    first.contains("author", keyword);
    const second = new AV.Query("zitie_pdf");
    second.contains("name", keyword);
    const query = AV.Query.or(first, second);
    query.limit(pageSize);
    query.descending("createdAt");
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {
        var poemList = document.getElementById('poem-list');

        results.forEach(function (object) {
            var describeData = object.get('describe');
            // 将数据展示在 HTML 页面上
            var authorData = object.get('author');
            var nameData = object.get('name');
            var describeData = object.get('describe');

            var card = document.createElement('div');
            card.classList.add('poem-card');
            var container = document.createElement('div');
            container.classList.add('poem-container');
            var wrapper = document.createElement('div');
            wrapper.classList.add('image-wrapper');


            var imgurl = object.get('cover')
            var decodedUrl = decodeURIComponent(imgurl);
            var img = document.createElement('img');
            
            var pdfUrl = object.get('url')

            // if (imgurl == undefined) {
            //     var decodedUrl = decodeURIComponent('https://image.lintiebao.cn/shufa/dic/' + object.get('title') + '.jpg');
            //     img.src = decodedUrl;
            // } else {
                const encrypt = new JSEncrypt();
                encrypt.setPrivateKey(key);
                const decryptedData = encrypt.decrypt(imgurl);
                var decodedUrl = decodeURIComponent(decryptedData);
                img.src = decodedUrl;

                const decryptedData2 = encrypt.decrypt(pdfUrl);
                var decodedUrl2 = decodeURIComponent(decryptedData2);
                
            // }
            
            // img.src = decodedUrl;
            img.classList.add('poem-cover');
            var name = document.createElement('div');
            name.classList.add('poem-content');
            name.textContent = nameData;
            var author = document.createElement('div');
            author.classList.add('poem-author');
            author.textContent = authorData;
            card.appendChild(name);
            card.appendChild(author);
            container.appendChild(wrapper);
            wrapper.appendChild(img)
            container.appendChild(card);
            poemList.appendChild(container);
            // 为诗词卡片添加点击事件
            card.addEventListener('click', function () {
                
                localStorage.setItem('selectedZitieCover', decodedUrl);
                localStorage.setItem('selectedZitieAuthor', authorData);
                localStorage.setItem('selectedZitieName', nameData);
                localStorage.setItem('selectedZitieDescribe', describeData);
                
                window.location.href = 'zitie_detail.html';
                
            });
        });
        callback(results);
    }).catch(function (error) {

    });
}


const timeSince = (date) => {
    const seconds = Math.floor((new Date() - date) / 1000);

    let interval = seconds / 31536000;

    if (interval > 1) {
        return Math.floor(interval) + " 年前";
    }
    interval = seconds / 2592000;
    if (interval > 1) {
        return Math.floor(interval) + " 个月前";
    }
    interval = seconds / 86400;
    if (interval > 1) {
        return Math.floor(interval) + " 天前";
    }
    interval = seconds / 3600;
    if (interval > 1) {
        return Math.floor(interval) + " 小时前";
    }
    interval = seconds / 60;
    if (interval > 1) {
        return Math.floor(interval) + " 分钟前";
    }
    if (seconds < 10) {
        return "刚刚";
    }

    return Math.floor(seconds) + " 秒前";
}

function requestDiscovery(currentPage, pageSize, callback) {
    const query = new AV.Query("post");
    query.limit(pageSize);
    // query.descending("createdAt");
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {
        var container = document.getElementById("container");
        results.forEach(function (object) {

            var newDiv = document.createElement("div");
            newDiv.classList.add("card");
            container.appendChild(newDiv);

            var textDiv = document.createElement("div");
            textDiv.classList.add("text");
            newDiv.appendChild(textDiv);

            var nameData = object.get('zitieName');
            var authorData = object.get('author');
            var name = document.createElement("div");
            name.classList.add("name");
            name.textContent = authorData + "·" + nameData;
            textDiv.appendChild(name);

            var newImg = document.createElement("img");
            var imgurl = object.get('cover')
            var decodedUrl = decodeURIComponent(imgurl);
            newImg.src = decodedUrl;
            newDiv.appendChild(newImg);

            newImg.addEventListener('click', function () {
                var imgArr = object.get('imgArr');
                var objectId = object.get('objectId');
                var isLoop = object.get('isLoop');
                var imgType = object.get('imgType');
                var loopNum = object.get('loopNum');
                var author = object.get('author');
                var name = object.get('zitieName');
                localStorage.setItem('imgArr', JSON.stringify(imgArr));

                localStorage.setItem('objectId', objectId);
                localStorage.setItem('imgType', imgType);
                localStorage.setItem('isLoop', isLoop);
                localStorage.setItem('loopNum', loopNum);
                localStorage.setItem('name', name);
                localStorage.setItem('author', author);

                window.location.href = 'zitie_today_detail.html';
            });


        });
        callback(results);
    }).catch(function (error) {
        // 处理错误
    });
}

function requestZidianDictCate(currentPage, pageSize, keyword, callback) {
    const first = new AV.Query("danzi_cate");
    first.contains("author", keyword);
    const second = new AV.Query("danzi_cate");
    second.contains("name", keyword);
    const query = AV.Query.or(first, second);
    query.limit(pageSize);
    query.descending("createdAt");
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {

        var container = document.getElementById('grid-container');
        results.forEach(function (object) {

            var newDiv = document.createElement("div");
            newDiv.classList.add("grid-item");
            var nameData = object.get('name');
            newDiv.textContent = nameData;
            container.appendChild(newDiv);
            newDiv.style.backgroundColor = getRandomDarkColor();

            newDiv.addEventListener('click', function () {
                // var name = object.get('name');
                localStorage.setItem('dict_className', object.get('class_name'));
                localStorage.setItem('dictMore_name', nameData);

                if (nameData == "书法字典") {
                    window.location.href = 'https://mdx.lintiebao.cn';
                } else {
                    window.location.href = 'shufaDict.html';
                }
            });
        })


        callback(results);
    }).catch(function (error) {

    });
}
function getRandomDarkColor() {
    var letters = '012345';
    var color = '#';
    for (var i = 0; i < 3; i++) {
        color += letters[Math.floor(Math.random() * 6)];
    }
    return color;
}
function requestZidianDict(currentPage, pageSize, keyword, callback) {

    var classN = localStorage.getItem('dict_className') ?? "danzi";
    const query = new AV.Query(classN);
    query.contains("name", keyword);
    query.limit(pageSize);
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {
        var container = document.getElementById("container");
        results.forEach(function (object) {
            var newDiv = document.createElement("div");
            newDiv.classList.add("card");
            container.appendChild(newDiv);
            var textDiv = document.createElement("div");
            textDiv.classList.add("text");
            newDiv.appendChild(textDiv);
            var nameData = object.get('name');
            var name = document.createElement("div");
            name.classList.add("name");
            name.textContent = nameData;
            textDiv.appendChild(name);
            var newImg = document.createElement("img");
            var imgurl = object.get('img')
            if (imgurl == undefined) {
                var decodedUrl = decodeURIComponent('https://image.lintiebao.cn/shufa/dic/' + object.get('title') + '.jpg');
                newImg.src = decodedUrl;
            } else {
                const encrypt = new JSEncrypt();
                encrypt.setPrivateKey(key);
                const decryptedData = encrypt.decrypt(imgurl);
                var decodedUrl = decodeURIComponent(decryptedData);
                newImg.src = decodedUrl;
            }
            newDiv.appendChild(newImg);
            newImg.addEventListener('click', function () {
                localStorage.setItem('dict_img', newImg.src);
                localStorage.setItem('dict_name', nameData);
                localStorage.setItem('dict_title', object.get('title'));
                localStorage.setItem('dict_id', object.get('objectId'));
                window.location.href = 'shufaDictDetail.html';
            });
        });
        callback(results);
    }).catch(function (error) {

    });
}
function requestZidianDict(currentPage, pageSize, keyword, callback) {

    var classN = localStorage.getItem('dict_className') ?? "danzi";
    const query = new AV.Query(classN);
    query.contains("name", keyword);
    query.limit(pageSize);
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {
        var container = document.getElementById("container");
        results.forEach(function (object) {
            var newDiv = document.createElement("div");
            newDiv.classList.add("card");
            container.appendChild(newDiv);
            var textDiv = document.createElement("div");
            textDiv.classList.add("text");
            newDiv.appendChild(textDiv);
            var nameData = object.get('name');
            var name = document.createElement("div");
            name.classList.add("name");
            name.textContent = nameData;
            textDiv.appendChild(name);
            var newImg = document.createElement("img");
            var imgurl = object.get('img')
            if (imgurl == undefined) {
                var decodedUrl = decodeURIComponent('https://image.lintiebao.cn/shufa/dic/' + object.get('title') + '.jpg');
                newImg.src = decodedUrl;
            } else {
                const encrypt = new JSEncrypt();
                encrypt.setPrivateKey(key);
                const decryptedData = encrypt.decrypt(imgurl);
                var decodedUrl = decodeURIComponent(decryptedData);
                newImg.src = decodedUrl;
            }
            newDiv.appendChild(newImg);
            newImg.addEventListener('click', function () {
                localStorage.setItem('dict_img', newImg.src);
                localStorage.setItem('dict_name', nameData);
                localStorage.setItem('dict_title', object.get('title'));
                localStorage.setItem('dict_id', object.get('objectId'));
                window.location.href = 'shufaDictDetail.html';
            });
        });
        callback(results);
    }).catch(function (error) {

    });
}
function requestZidianDict2(currentPage, pageSize, characters, callback) {
    let dataArr = new Array(characters.length).fill(null);
    let classN = localStorage.getItem('dict_className') ?? "danzi";
    const maxConcurrentRequests = 1;
    let currentRequest = 0;
    let completedRequests = 0;

    function sendRequest(index) {
        if (index >= characters.length) {
            checkCompletion();
            return;
        }

        const character = characters[index];
        const query = new AV.Query(classN);
        query.contains("name", character);
        query.limit(pageSize);
        query.skip((currentPage - 1) * pageSize);

        if (currentRequest < maxConcurrentRequests) {
            currentRequest++;
            query.find().then(function(results) {
                currentRequest--;
                completedRequests++;

                if (results.length > 0) {
                    const randomIndex = Math.floor(Math.random() * results.length);
                    const result = results[randomIndex];
                    const name = result.get('name');
                    if (name === character) {
                        dataArr[index] = result;
                    }
                }

                checkCompletion();
                sendRequest(index + 1);
            }).catch(function(error) {
                console.log(error);
                currentRequest--;
                completedRequests++;
                checkCompletion();
                sendRequest(index + 1);
            });
        }
    }

    function checkCompletion() {
        if (completedRequests === characters.length) {
            callback(dataArr); // 处理完所有数据后回调
        }
    }

    sendRequest(0); // 从第一个字符开始发送请求
}
function requestZidianDict3(currentPage, pageSize, keyword, callback) {

    var classN = localStorage.getItem('dict_className') ?? "danzi";
    const query = new AV.Query(classN);
    query.contains("name", keyword);
    query.limit(pageSize);
    query.skip((currentPage - 1) * pageSize);
    // 查询数据
    query.find().then(function (results) {
        results.forEach(function (object) { 
        });
        callback(results);
    }).catch(function (error) {

    });
}
function requestKey(callback) {
    const query = new AV.Query("privateKey");
    query.find().then(function (results) {
        callback(results);
    }).catch(function (error) {

    });
}
function cleanDict() {
    var dataContainer = document.getElementById('container');
    dataContainer.innerText = '';
}